# Agent è®¾è®¡ç»éªŒæ€»ç»“2ï¼šä½¿ç”¨LLMs.txtè¿›è¡Œ Codebase Indexingçš„ Context Engineering çš„è®¾è®¡æ€»ç»“

## å¼•è¨€

è¿‘æœŸï¼Œæˆ‘èšç„¦äº**Coding Agent**çš„è®°å¿†ä¼˜åŒ–é¢†åŸŸå±•å¼€æ·±åº¦æ¢ç´¢ã€‚ä½œä¸ºå…¸å‹çš„ React Agentï¼ŒCoding Agent èƒ½ä¾æ‰˜ç°æœ‰å·¥å…·é€æ­¥æ¨è¿›ä»»åŠ¡è§£å†³æµç¨‹ï¼Œä½†åœ¨å¤„ç†å¤æ‚çš„é•¿ä¸Šä¸‹æ–‡ä»»åŠ¡æ—¶ï¼Œæ˜“å‡ºç° â€œå¹»è§‰â€ é—®é¢˜ï¼Œå¯¼è‡´ç»“æœé”™è¯¯æˆ–è¿œè¶…context limitè€Œé€ æˆä»»åŠ¡å¤±è´¥ã€‚å› æ­¤ï¼Œ**Context Engineeringï¼ˆä¸Šä¸‹æ–‡å·¥ç¨‹ï¼‰** å¯¹æå‡ Coding Agent æ€§èƒ½è‡³å…³é‡è¦ã€‚

æ­¤å‰ï¼Œæˆ‘è§‚çœ‹äº† Latent Space çš„æŠ€æœ¯åˆ†äº«ä¼šï¼Œä¼šä¸Šæå‡ºçš„å¤šé¡¹ Context Engineering ä¼˜åŒ–ç­–ç•¥æå…·å¯å‘ã€‚æœ¬æ–‡å°†å›´ç»•**ä»£ç ä»“åº“æ£€ç´¢ï¼ˆRetrievalï¼‰** è¿™ä¸€æ ¸å¿ƒç¯èŠ‚ï¼Œç³»ç»Ÿé˜è¿°æˆ‘çš„ç†è§£ä¸å®è·µæ€è€ƒï¼Œå¹¶åœ¨æ–‡æœ«é™„ä¸ŠåŸºäºè¯¥æ€è·¯çš„å®ç°ä»£ç ä»“åº“é“¾æ¥ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚

## æ£€ç´¢ï¼ˆRetrievalï¼‰æœºåˆ¶

æ£€ç´¢æ˜¯context engineeringçš„ä¸€ç§ç­–ç•¥ï¼Œæ£€ç´¢çš„æ ¸å¿ƒæ˜¯ â€œç²¾å‡†è·å–ç›®æ ‡ä¿¡æ¯â€ï¼Œé’ˆå¯¹ä¸åŒä»»åŠ¡åœºæ™¯ï¼Œå…¶ç­–ç•¥ä¸å®ç°æ–¹å¼å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼š



* **å¤–éƒ¨æ–‡æ¡£åº“æ£€ç´¢**ï¼šé€šå¸¸é‡‡ç”¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„è¯­ä¹‰å¬å›ç­–ç•¥(æ›´è¿›ä¸€æ­¥è¿˜æœ‰rerankï¼Œå¤šè·¯å¬å›ç­‰ç­–ç•¥ï¼Œè¿™é‡Œä¸è¯¦ç»†è§£é‡Š)ã€‚é€šè¿‡æŒ‡å®šç¼–ç æ¨¡å‹å¯¹æ–‡æ¡£åº“å†…å®¹åˆ†å—è¿›è¡Œç¦»çº¿å‘é‡ç¼–ç ï¼ŒåŒæ—¶å¯¹ç”¨æˆ·æŸ¥è¯¢åšåœ¨çº¿å‘é‡ç¼–ç ï¼Œæœ€ç»ˆé€šè¿‡ç›¸ä¼¼åº¦è®¡ç®—è¿”å› Top K ä¸ªç›¸å…³æ–‡æ¡£å—ã€‚

* **æœç´¢å¼•æ“æ£€ç´¢**ï¼šè®¾è®¡ Agent è¿›è¡Œè¿›è¡Œ Query Rewriteï¼ˆæŸ¥è¯¢é‡å†™ï¼‰åè§¦å‘æœç´¢å¼•æ“è¿›è¡Œæœç´¢è·å¾—å¤§é‡ç½‘é¡µä¿¡æ¯ï¼Œå†é€šè¿‡ Filter Agentï¼ˆè¿‡æ»¤ä»£ç†ï¼‰å¯¹æ£€ç´¢ç»“æœè¿›è¡Œè´¨é‡è¯„ä¼°ï¼Œç­›é€‰å‡ºé«˜ä»·å€¼ä¿¡æ¯ã€‚

* **ä»£ç ä»“åº“æ£€ç´¢**ï¼šéœ€é€šè¿‡**Codebase Indexingï¼ˆä»£ç åº“ç´¢å¼•ï¼‰** æœºåˆ¶å®ç°é«˜æ•ˆä¿¡æ¯æå–ã€‚

```mermaid
graph TD
    A[æ£€ç´¢æœºåˆ¶] --> B[å¤–éƒ¨æ–‡æ¡£åº“æ£€ç´¢]
    A --> C[æœç´¢å¼•æ“æ£€ç´¢]
    A --> D[ä»£ç ä»“åº“æ£€ç´¢]
    
    B --> B1[æ–‡æ¡£åˆ†å—]
    B1 --> B2[å‘é‡ç¼–ç ]
    B2 --> B3[ç›¸ä¼¼åº¦è®¡ç®—]
    B3 --> B4[è¿”å›Top Kç»“æœ]
    
    C --> C1[Query Rewrite]
    C1 --> C2[æœç´¢å¼•æ“]
    C2 --> C3[Filter Agent]
    C3 --> C4[é«˜ä»·å€¼ä¿¡æ¯]
    
    D --> D1[Codebase Indexing]
    D1 --> D2[ç²¾å‡†å®šä½ä»£ç ]
```

åœ¨æˆ‘çš„ Coding Agent æ¶æ„è®¾è®¡ä¸­ï¼Œå…¶è¢«èµ‹äºˆ**Supervisor Agentï¼ˆç›‘ç®¡ä»£ç†ï¼‰** è§’è‰²ï¼Œå†…ç½®ä¸°å¯Œå·¥å…·é›† â€”â€” æ—¢åŒ…å« Create Fileã€Execute File ç­‰åŸºç¡€å·¥å…·ï¼Œä¹Ÿæ¶µç›–å„ç±» Subagentï¼ˆå­ä»£ç†ï¼‰å·¥å…·ï¼ˆå³ Agent as Toolsï¼‰ã€‚è¯¥æ¶æ„è®© Coding Agent ä¸“æ³¨äºä»»åŠ¡æ‹†è§£ä¸æ‰§è¡Œç»Ÿç­¹ï¼Œå…·ä½“æ“ä½œäº¤ç”±å¯¹åº”å·¥å…·å®Œæˆï¼Œå®ç° "åˆ†å·¥æ˜ç¡®ã€é«˜æ•ˆåä½œ" çš„ä»»åŠ¡ç®¡ç†æ¨¡å¼ã€‚

```mermaid
graph TD
    A[Coding Agent<br/>Supervisor Agent] --> B[åŸºç¡€å·¥å…·]
    A --> C[å­ä»£ç†å·¥å…·<br/>Agent as Tools]
    
    B --> B1[Create File]
    B --> B2[Execute File]
    B --> B3[å…¶ä»–åŸºç¡€å·¥å…·]
    
    C --> C1[Search Agent<br/>äº’è”ç½‘æ–‡ç« æ£€ç´¢]
    C --> C2[llms.txt Generator<br/>ä»£ç ä»“åº“ç´¢å¼•]
    
    C1 -.-> C1A[æŸ¥è¯¢äº’è”ç½‘]
    C2 -.-> C2A[ç”Ÿæˆå¯¼èˆªç›®å½•]
    
    style A fill:#ff9999
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style C1 fill:#e8f5e8
    style C2 fill:#e8f5e8
```

ç›®å‰ï¼Œæˆ‘ä¸º Coding Agent è®¾è®¡äº†ä¸¤ç§æ ¸å¿ƒæ£€ç´¢å½¢å¼ï¼š



1. å°† Search Agent ä½œä¸ºå·¥å…·(å¯çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« )ï¼Œä¾› Coding Agent åœ¨éœ€è¦æ£€ç´¢äº’è”ç½‘æ–‡ç« æ—¶è§¦å‘ï¼›

2. åœ¨ä¸‹è½½æˆ–è¯»å–ä»£ç ä»“åº“å‰ï¼Œè§¦å‘llm**s.txt Generator**ç”Ÿæˆç´¢å¼•ç›®å½•æ–‡ä»¶ä½œä¸ºsupervisorçš„å¯¼èˆªç›®å½•ã€‚

## Codebase Indexingï¼šä»£ç åº“ç´¢å¼•çš„ä¼˜åŒ–è·¯å¾„

**Codebase Indexingï¼ˆä»£ç åº“ç´¢å¼•ï¼‰** çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯è®© AI è¾…åŠ©ç¼–ç¨‹å·¥å…·èƒ½æ ¹æ®ç”¨æˆ·éœ€æ±‚å¿«é€Ÿå®šä½ç›¸å…³ä»£ç ç‰‡æ®µï¼Œä¸ºç¼–è¾‘å™¨ä¸­çš„ Agent æä¾›ç²¾å‡†ä¸Šä¸‹æ–‡ã€‚

### 1. ä¼ ç»Ÿæ–¹æ¡ˆï¼šåŸºäº RAG çš„ä»£ç åº“ç´¢å¼•

ä¼ ç»Ÿä»£ç åº“ç´¢å¼•é€šå¸¸é‡‡ç”¨ RAG æŠ€æœ¯ï¼Œå®Œæ•´æµç¨‹åŒ…å«ä»¥ä¸‹ 6 ä¸ªç¯èŠ‚ï¼š



1. **æ–‡ä»¶æ‰«æä¸é¢„å¤„ç†**ï¼šéå†é¡¹ç›®ç›®å½•ï¼Œè¯»å–æ‰€æœ‰æºä»£ç æ–‡ä»¶ï¼Œå®Œæˆå»å†—ä½™ç©ºç™½ã€ç»Ÿä¸€ç¼–ç æ ¼å¼ç­‰é¢„å¤„ç†æ“ä½œã€‚

2. **æ–‡æœ¬åˆ†å—ï¼ˆChunkingï¼‰ä¸å…ƒæ•°æ®æ„å»º**ï¼šæŒ‰è¡Œæ•°ã€å­—ç¬¦æ•°æˆ–è¯­ä¹‰é€»è¾‘å°†æ–‡ä»¶æ‹†åˆ†ä¸º â€œå—â€ï¼ˆç¡®ä¿å—é•¿åº¦é€‚ä¸­ä¸”ä¸Šä¸‹æ–‡å®Œæ•´ï¼‰ï¼Œå¹¶ä¸ºæ¯ä¸ªå—é™„åŠ æ–‡ä»¶è·¯å¾„ã€å—é•¿åº¦ç­‰å…ƒæ•°æ®ã€‚

3. **ç”Ÿæˆå‘é‡åµŒå…¥ï¼ˆEmbeddingï¼‰**ï¼šé€šè¿‡åµŒå…¥æ¨¡å‹å°†ä»£ç å—è½¬æ¢ä¸ºå›ºå®šç»´åº¦å‘é‡ï¼Œè¿™æ˜¯å†³å®šåç»­è¯­ä¹‰åŒ¹é…æ•ˆæœçš„æ ¸å¿ƒæ­¥éª¤ã€‚

4. **æ„å»ºå‘é‡ç´¢å¼•åº“**ï¼šå°†ä»£ç å—å‘é‡ä¸å…ƒæ•°æ®å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“æˆ–å†…å­˜ç´¢å¼•ä¸­ï¼Œæ­¤æ­¥éª¤æ˜¯ä¸ºäº†é¿å…åœ¨å¬å›é˜¶æ®µé€Ÿåº¦è¿‡æ…¢ï¼Œè´¨é‡æ¢æ—¶é—´ã€‚(PS: å½“ç„¶è‹¥ä»£ç ä»“åº“è¾ƒå°ï¼Œä½¿ç”¨æš´åŠ›æœç´¢è¿›è¡Œå¬å›ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼Œè¿™ç§æ–¹å¼è´¨é‡æœ€é«˜)

5. **æŸ¥è¯¢æ£€ç´¢ä¸æ’åº**ï¼šå°†ç”¨æˆ·æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡åï¼Œåœ¨ç´¢å¼•åº“ä¸­æ‰§è¡Œè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ŒæŒ‰ç›¸ä¼¼åº¦åˆ†æ•°å¯¹ç»“æœæ’åºå¹¶è¿”å›ã€‚

6. **ç»“æœæ•´åˆä¸åŠ¨æ€æ›´æ–°**ï¼šå°†æ£€ç´¢åˆ°çš„ä»£ç å—ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™è¯­è¨€æ¨¡å‹ï¼ŒåŒæ—¶è®¾è®¡å®æ—¶æ›´æ–°ï¼ˆä»£ç åº“ä¿®æ”¹åé‡æ–°è®¡ç®—åµŒå…¥ï¼‰ä¸ç¼“å­˜ç­–ç•¥ï¼Œå¹³è¡¡ç´¢å¼•å‡†ç¡®æ€§ä¸å“åº”é€Ÿåº¦ã€‚

```mermaid
flowchart LR
    A[1. æ–‡ä»¶æ‰«æä¸é¢„å¤„ç†] --> B[2. æ–‡æœ¬åˆ†å—ä¸<br/>å…ƒæ•°æ®æ„å»º]
    B --> C[3. ç”Ÿæˆå‘é‡åµŒå…¥]
    C --> D[4. æ„å»ºå‘é‡ç´¢å¼•åº“]
    D --> E[5. æŸ¥è¯¢æ£€ç´¢ä¸æ’åº]
    E --> F[6. ç»“æœæ•´åˆä¸<br/>åŠ¨æ€æ›´æ–°]
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#fff4e1
    style E fill:#e8f5e8
    style F fill:#e8f5e8
```

åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿˜å¯é€šè¿‡**æ··åˆå¬å›**ï¼ˆç»“åˆ GraphRAG å›¾è°±ã€Rerank é‡æ’åºç­‰æŠ€æœ¯ï¼‰è¿›ä¸€æ­¥æå‡æ£€ç´¢å‡†ç¡®ç‡ã€‚

### 2. ä¼˜åŒ–æ–¹æ¡ˆï¼šLLM.txt + ä¼ ç»Ÿæœç´¢å·¥å…·çš„ååŒæ¨¡å¼

å½“å‰ï¼Œæœ‰ä¸€ç§æ›´é«˜æ•ˆçš„ä»£ç åº“æ£€ç´¢æ–¹æ¡ˆ â€”â€”**â€œLLM.txt + ä¼ ç»Ÿæœç´¢å·¥å…·ï¼ˆgrep/findï¼‰åŸºäºAgent å¤šè½®å·¥å…·è°ƒç”¨æ¥è·å¾—ä»“åº“æ‰€éœ€è¦çš„ä¿¡æ¯**ã€‚

ç ”ç©¶æ•°æ®æ˜¾ç¤ºï¼Œé‡‡ç”¨ â€œLLM.txt + URL Reloadingâ€ ä¼˜åŒ–åï¼Œä»£ç åœºæ™¯ä¸‹çš„æ£€ç´¢æ•ˆæœæ˜¾è‘—ä¼˜äºä¼ ç»Ÿ RAG æ–¹æ³•ã€‚

![img.png](img.png)

## æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ llms.txtï¼Ÿ

ä»å®šä¹‰æ¥çœ‹ï¼Œä¼ ç»Ÿ llms.txt æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨æ˜¯ â€œåœ¨æ¨ç†é˜¶æ®µä¸º LLM æä¾›ç½‘ç«™è®¿é—®è¾…åŠ©ä¿¡æ¯â€ã€‚å®ƒé‡‡ç”¨ Markdown æ ¼å¼ï¼Œå…¼å…· â€œäººç±»å¯è¯»â€ ä¸ â€œLLM å¯è¯»â€ ç‰¹æ€§ï¼Œä¸”æ ¼å¼è§„èŒƒç»Ÿä¸€ã€‚

åŸºäºè¿™ä¸€æ€è·¯ï¼Œæˆ‘å°† llms.txt çš„åº”ç”¨åœºæ™¯å»¶ä¼¸è‡³ä»£ç ä»“åº“ï¼š

llms.txt å¯è§†ä¸ºä¸€ä»½**ä»£ç åº“ç´¢å¼•æ–‡æ¡£**ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€æ¸…æ™°æè¿°ä»£ç ä»“åº“ä¸­æ¯ä¸ªæ–‡ä»¶ï¼ˆè„šæœ¬ã€é…ç½®ç­‰ï¼‰çš„å†…å®¹ä¸è·¯å¾„ã€‚å…¶æœ¬è´¨æ˜¯ â€œäººç±»ä¸ LLM é€šç”¨çš„è‡ªç„¶è¯­è¨€æè¿°æ–‡ä»¶â€ï¼Œå¯å­˜å‚¨ä¸º.md æˆ–.txt æ ¼å¼ï¼Œæ ¸å¿ƒä»·å€¼æ˜¯å¸®åŠ© LLM åœ¨æ¨ç†æ—¶å¿«é€Ÿå®šä½å¹¶è®¿é—®æ‰€éœ€çš„ä»£ç æ–‡ä»¶ã€‚

## å®è·µæŒ‡å—ï¼šå¦‚ä½•æ„å»ºä»£ç ä»“åº“ä¸“å± llms.txtï¼Ÿ

æ„å»ºæµç¨‹æœ¬è´¨ååˆ†ç®€å•ï¼Œæ ¸å¿ƒåˆ†ä¸º 4 æ­¥ï¼Œä»¥ä¸‹ä¸ºå…·ä½“æ“ä½œè·¯å¾„ï¼š



1. **é€‰å®šç›®æ ‡ä»£ç ä»“åº“**ï¼šç¡®å®šéœ€æ„å»ºç´¢å¼•çš„ä»£ç ä»“åº“é¡¹ç›®ã€‚

2. **è·å–æ–‡ä»¶è·¯å¾„ä¸ URL**ï¼šé€šè¿‡ GitHub è®¿é—®å·¥å…·ï¼Œæå–ä»“åº“å†…æ‰€æœ‰è„šæœ¬çš„è·¯å¾„åŠå¯¹åº”çš„å¯ä¸‹è½½ URLã€‚

3. **çˆ¬å–è„šæœ¬å†…å®¹**ï¼šä½¿ç”¨çˆ¬è™«å·¥å…·æ‰¹é‡è·å–æ‰€æœ‰è„šæœ¬çš„å®Œæ•´å†…å®¹ã€‚

4. **ç”Ÿæˆæ–‡ä»¶æ‘˜è¦**ï¼šé€šè¿‡ LLM æ„å»º Summary Agentï¼Œå¯¹æ¯ä¸ªè„šæœ¬å†…å®¹è¿›è¡Œæ€»ç»“ï¼Œæœ€ç»ˆæ•´åˆæˆ LLM.txt æ–‡ä»¶ã€‚

```mermaid
flowchart TD
    A[é€‰å®šç›®æ ‡ä»£ç ä»“åº“] --> B[è·å–æ–‡ä»¶è·¯å¾„ä¸URL]
    B --> C[çˆ¬å–è„šæœ¬å†…å®¹]
    C --> D[ç”Ÿæˆæ–‡ä»¶æ‘˜è¦]
    D --> E[ç”Ÿæˆ llms.txt]
    
    B -.-> B1[GitHub API]
    C -.-> C1[çˆ¬è™«å·¥å…·]
    D -.-> D1[LLM Summary Agent]
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#fff4e1
    style E fill:#e8f5e8
```

## ä»£ç ä»“åº“åœ°å€

æœ¬æ–‡æåŠçš„ LLM.txt ç”Ÿæˆå·¥å…·åŠå®Œæ•´å®ç°é€»è¾‘ï¼Œå·²å¼€æºè‡³ GitHub ä»“åº“ï¼Œä»“åº“å†…åŒ…å«è¯¦ç»† README æ–‡æ¡£ï¼Œå¯ç›´æ¥æŸ¥çœ‹ä¸å¤ç”¨ã€‚

è®¿é—®é“¾æ¥ï¼š[https://github.com/mbt1909432/fast_llms_txt_generator)


## ğŸ“š å‚è€ƒèµ„æ–™

(https://mp.weixin.qq.com/s/Ppk9KYi9XducDzKYTaGvtw)
(https://blog.csdn.net/i042416/article/details/145438638)
(https://www.youtube.com/watch?v=_IlTcWciEC4)
